<h1>Blocked or stalled work</h1>
<p>
  This chart highlights work that is blocked or stalled on each given day. In Jira terms, blocked means that the issue has been "flagged". Stalled indicates that the item hasn't had any updates in <%= stalled_threshold %> days.
</p>
<p>
  Note that if an item tracks as both blocked and stalled, it will only show up in the flagged totals. It will not be double counted.
</p>
<div>
  <canvas id="<%= chart_id %>" width="800" height="200"></canvas>
</div>
<script>
new Chart(document.getElementById('<%= chart_id %>').getContext('2d'),
{
  type: 'bar',
  data: {
    datasets: <%= JSON.generate(data_sets) %>
  },
  options: {
    title: {
      display: true,
      text:    "Work that is blocked or stalled"
    },
    responsive: true, // If responsive is true then it fills the screen
    scales: {
      x: {
        type: 'time',
        time: {
          unit: 'day'
        },
        stacked: true
      },
      y: {
        stacked: true,
        scaleLabel: {
          display: true,
          labelString: 'WIP'
        }
      }
    },
    plugins: {
      tooltip: {
        callbacks: {
          label: function(context) {
            return context.dataset.data[context.dataIndex].title
          }
        }
      }
    }
  }
});
</script>
